webpackJsonp([1],{CXwf:function(t,e){},KmMj:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("el-container",[e("el-header",[e("div",{staticClass:"logo"},[e("router-link",{attrs:{to:"/"}},[this._v("\n             Vue & Vuex\n        ")])],1)]),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var a=o("VU/8")({name:"App",created:function(){this.$store.dispatch({type:"loadPost"})}},s,!1,function(t){o("txwO")},null,null).exports,r=o("/ocq"),i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",t._l(t.postList,function(e){return o("el-col",{key:e.id,attrs:{span:24}},[o("router-link",{attrs:{to:"/post/"+e.id}},[o("el-card",[o("span",[t._v(t._s(e.title))])])],1)],1)}))},staticRenderFns:[]};var c=o("VU/8")({name:"Home",computed:{postList:function(){return this.$store.state.post.all}},created:function(){}},i,!1,function(t){o("CXwf")},"data-v-09391984",null).exports,l={name:"PostBody",props:["postId"],computed:{loading:function(){return this.post},commentCount:function(){return this.$store.state.comment.all.length},post:function(){var t=this;return console.log(this.$store.state.post.all),this.$store.state.post.all.find(function(e){return e.id===t.postId})}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",[t.post?o("el-card",[o("h1",[t._v(t._s(t.post.title))]),t._v(" "),o("div",{staticClass:"item"},[o("el-badge",{attrs:{value:t.commentCount}},[o("el-button",{attrs:{size:"small"}},[t._v("评论")])],1)],1)]):t._e()],1)},staticRenderFns:[]};var d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-form",{ref:"commentForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.comment}},[o("el-form-item",{attrs:{label:"评论",prop:"body",rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[o("el-input",{attrs:{placeholder:"请输入评论"},model:{value:t.comment.body,callback:function(e){t.$set(t.comment,"body",e)},expression:"comment.body"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.addComment}},[t._v("添加")])],1)],1)],1),t._v(" "),t._l(t.commentList,function(e){return o("div",{key:e.id,staticClass:"text item"},[t._v("\n\n\n  "+t._s(e.body)+"\n")])})],2)],1)},staticRenderFns:[]};var u={name:"Post",components:{PostBody:o("VU/8")(l,m,!1,function(t){o("uNnv")},"data-v-5f42ef2f",null).exports,CommentBox:o("VU/8")({name:"CommentBox",props:["postId"],data:function(){return{comment:{body:""}}},computed:{commentList:function(){return this.$store.state.comment.all.slice().reverse()}},methods:{addComment:function(){var t=this;this.$refs.commentForm.validate(function(e){if(!e)return!1;t.comment.id=t.$store.state.comment.all.length+1;var o={body:t.comment.body,postId:t.postId};t.$store.dispatch({type:"addComment",comment:o}),t.comment={body:""},t.$refs.commentForm.resetFields()})}}},d,!1,function(t){o("Z5D7")},"data-v-10fb93f3",null).exports},computed:{postId:function(){return this.$route.params.id}},created:function(){var t=this.postId;this.$store.dispatch({type:"loadComments",postId:t})}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{attrs:{span:24}},[e("PostBody",{attrs:{postId:this.postId}})],1),this._v(" "),e("el-col",{attrs:{span:24}},[e("CommentBox",{attrs:{postId:this.postId}})],1)],1)},staticRenderFns:[]};var f=o("VU/8")(u,p,!1,function(t){o("KmMj")},"data-v-2477b03b",null).exports;n.default.use(r.a);var h=new r.a({mode:"history",routes:[{path:"/",name:"Home",component:c},{path:"/post/:id",name:"Post",component:f}]}),v=o("zL8q"),_=o.n(v),C=(o("tvR6"),o("NYxO")),b=o("Dd8w"),y=o.n(b),$=o("mtWM"),x=o.n($),g={state:{all:[]},mutations:{addComment:function(t,e){t.all.push(e)},loadComments:function(t,e){t.all=e}},actions:{addComment:function(t,e){var o=t.commit,n=e.comment;x.a.post("http://localhost:3033/comment",y()({},n)).then(function(t){o("addComment",t.data)}).catch(function(t){v.Notification.error({title:"错误",message:"服务错误"})})},loadComments:function(t,e){var o=t.commit,n="http://localhost:3033/comment?postId ="+e.postId;x.a.get(n).then(function(t){o("loadComments",t.data)}).catch(function(t){v.Notification.error({title:"错误",message:"加载评论错误"})})}}},w={state:{all:[]},mutations:{loadPost:function(t,e){t.all=e}},actions:{loadPost:function(t){var e=t.commit;x.a.get("http://localhost:3033/post").then(function(t){e("loadPost",t.data)}).catch(function(t){v.Notification.error({title:"错误",message:"加载数据出错"})})}}};n.default.use(C.a);var I=new C.a.Store({modules:{comment:g,post:w}});n.default.use(_.a),n.default.config.productionTip=!1,new n.default({el:"#app",store:I,router:h,components:{App:a},template:"<App/>"})},Z5D7:function(t,e){},tvR6:function(t,e){},txwO:function(t,e){},uNnv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.07846bcc00ecf2142af7.js.map